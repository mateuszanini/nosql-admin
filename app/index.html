<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>NoSQL | Admin</title>
    <link rel="icon" href="assets/img/logo.png" />

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="assets/img/logo.png">

    <!-- Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- CSS próprio -->
    <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

    <!-- TELA DE LOGIN -->
    <div class="blue lighten-1" id="bg">
        <!-- Indicador de carregamento -->
        <div class="row center-align" id="preloaderCarregando">
            <div class="preloader-wrapper active">
                <div class="spinner-layer spinner-red-only">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Painel de login -->
        <div class="row hide" id="painelLogin">
            <div class="col s12 m6 l4 offset-m3 offset-l4">

                <div class="row">
                    <div class="col s12 m12 l12">
                        <div class="card-panel z-depth-4">
                            <div class="row">
                                <div class="col s8 m6 l4 offset-s2 offset-m3 offset-l4">
                                    <img class="responsive-img" src="assets/img/logo.png">
                                </div>
                            </div>
                            <div class="row">
                                <form class="col s12 m12 l12" id="formLogin">
                                    <div class="row">
                                        <div class="input-field col s12 m12 l12">
                                            <!--<i class="material-icons prefix login">email</i>-->
                                            <input id="emailLogin" type="email" name="emailLogin" class="validate inputLogin">
                                            <label for="emailLogin" data-error="Email inválido" data-success="">Email</label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="input-field col s12 m12 l12">
                                            <!--<i class="material-icons prefix login">vpn_key</i>-->
                                            <input id="senhaLogin" type="password" name="senhaLogin" class="validate inputLogin">
                                            <label for="senhaLogin">Senha</label>
                                        </div>
                                    </div>

                                    <!-- Mensagens de Alerta -->
                                    <div class="row center-align">
                                        <div class="col s12 m12 l12" id="mensagem">

                                        </div>
                                    </div>

                                    <a id="btnLogin" class="waves-effect waves-light btn col s12 m12 l12 blue lighten-1">Login</a>
                                </form>
                            </div>
                            <div class="row">
                                <div class="col s12 m12 l12 center-align">
                                    <a href="#modalRecuperarSenha">Esqueci minha senha</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- CONTEUDO -->
    <div class="row hide" id="conteudo">
        <nav class="nav-extended blue lighten-1">
            <div class="nav-wrapper">
                <a href="#" class="brand-logo">&nbspNoSQL Admin</a>
                <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li>
                        <a href="#!" class="usrLogadoMenu tooltipped" data-position="left" data-tooltip="Editar meu perfil"><i class="material-icons left">person</i></a>
                    </li>
                    <li><a href="#!" id="usrLogoutMenu"><i class="material-icons left">power_settings_new</i>Sair</a></li>
                </ul>
                <ul class="side-nav" id="mobile-demo">
                    <li>
                        <a href="#!" class="usrLogadoMenu"><i class="material-icons left">person</i></a>
                    </li>
                    <li><a href="#!" id="usrLogoutMenu"><i class="material-icons left">power_settings_new</i>Sair</a></li>
                </ul>
            </div>
            <div class="nav-content">
                <ul class="tabs tabs-transparent">
                    <li class="tab col s6 m6 l6"><a class="active" href="#tabUsuarios"><i class="material-icons left">person</i>Usuários</a></li>
                    <li class="tab col s6 m6 l6"><a href="#tabEmpresas"><i class="material-icons left">work</i>Empresas</a></li>
                </ul>
            </div>
        </nav>

        <div id="tabUsuarios" class="col s12 m12 l12">
            <div class="row" id="painelUsuarios">
                <!--aqui vem a lista de usuários-->
            </div>
            <!--row -->
        </div>

        <div class="fixed-action-btn">
            <a href="#modalUsuario" id="btnNovoUsuario" class="btn-floating btn-large waves-effect waves-light green tooltipped modal-trigger"
                data-position="left" data-tooltip="Novo usuário">
                <i class="material-icons">add</i>
            </a>
        </div>
    </div>
    <!--tabUsuarios -->

    <div id="tabEmpresas" class="col s12 m12 l12">
        <div class="fixed-action-btn">
            <a id="btnAddEmpresa" class="btn-floating btn-large waves-effect waves-light green tooltipped" data-position="left" data-tooltip="Nova empresa">
                <i class="material-icons">add</i>
            </a>
        </div>
    </div>

    <!-- MODAIS -->
    <!-- Modal de Recuperação de Senha -->
    <div id="modalRecuperarSenha" class="modal">
        <div class="modal-content">
            <form class="col s12 m12 l12">
                <div class="row">
                    <div class="input-field col s12 m10 l8 offset-m1 offset-l2">
                        <input id="emailRecuperarSenha" type="email" name="email" class="validate login" autofocus>
                        <label for="email" data-error="Email inválido" data-success="">Email</label>
                    </div>
                    <div class="col s12 m10 l8 offset-m1 offset-l2">
                        <a class="waves-effect waves-light btn col s12 m12 l12 blue lighten-1" id="btnRedefinirSenha">Redefinir Senha</a>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-blue btn-flat">Cancelar</a>
        </div>
    </div>

    <!-- Modal Usuário -->
    <div id="modalUsuario" class="modal modal-fixed-footer">
        <form class="col s12" id="formUsuario">
            <div class="modal-content">
                <h4 id="tituloModalUsuario"></h4>
                <div class="row">
                    <div class="row">
                        <div class="input-field col s12 m6 l6">
                            <input id="nomeUsuario" name="nomeUsuario" type="text" class="validate">
                            <label for="nomeUsuario">Nome</label>
                        </div>
                        <div class="input-field col s12 m6 l6">
                            <input id="emailUsuario" name="emailUsuario" type="email" class="validate">
                            <label for="emailUsuario" data-error="Email inválido" data-success="">Email</label>
                        </div>

                        <div class="input-field col s12 m12 l12">
                            <select name="empresaUsuario" id="empresaUsuario" multiple>

                            </select>
                            <label>Empresa</label>
                        </div>

                        <div class="input-field col s12 m6 l6">
                            <select name="tipoUsuario" id="tipoUsuario">
                              <option value="admin">Administrador</option>
                              <option value="gerente">Gerente</option>
                              <option value="operador" selected>Operador</option>
                            </select>
                            <label for="tipoUsuario">Tipo</label>
                        </div>

                        <!--
                        <div class="input-field col s12 m6 l6">
                            <div class="switch">
                                <label>
                                  Inativo
                                  <input type="checkbox" name="ativoUsuario" id="ativoUsuario" checked>
                                  <span class="lever"></span>
                                  Ativo
                                </label>
                            </div>
                        </div>
-->

                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button class="btn waves-effect waves-light blue lighten-1" type="submit" name="action" id="btnSalvaUsuario"></button>
                <a href="#!" class="modal-action modal-close waves-effect btn-flat ">Cancelar</a>
            </div>
        </form>
    </div>


    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/3.7.5/firebase.js"></script>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"></script>
    <!-- data tables -->
    <!--<script src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>
     <script src="https://cdn.datatables.net/1.10.10/js/dataTables.bootstrap.min.js"></script>-->

    <script src="assets/js/script.js"></script>
    <script type="text/javascript" src="assets/js/models/util.js"></script>
    <script type="text/javascript" src="assets/js/models/Empresa.js"></script>
    <script type="text/javascript" src="assets/js/models/Usuario.js"></script>
    <script type="text/javascript" src="assets/js/UsuarioController.js"></script>

    <script>
        $(document).ready(function () {
            app.initialize();
            //Empresas.init();
            //Usuarios.init();
        });
        //adiciona no objeto Array um metodo para verificar a diferença entre dois arrays
        //exemplo: ['a','b','c'].diff(['a','b','q']) resulta em: ['c']
        Array.prototype.diff = function (a) {
            return this.filter(function (i) { return a.indexOf(i) < 0; });
        };
    </script>

</body>

</html>